<section>
  <% if can? :delete, @post %>
    <%= button_to "Delete Post", user_post_path(@post.author_id, @post.id), method: :delete  %>
  <% end %>

  <div>
    <h3><%= @post.title %> by <%= @post.author.name %></h3>

    <small>Comments: <%= @post.comments_counter || 0 %>, Likes: <%= @post.likes_counter || 0 %></small>
  </div>
  
  <p><%= @post.text %></p>

  <% if user_signed_in? %>
    <%= button_to "Like", user_post_likes_path(@post.author, @post) %>
    <%= link_to 'New Comment', new_user_post_comment_path(current_user, @post) %>
  <% end %>

  <div>
    <% @comments.each do |comment| %>
      <li>
        <p><%= comment.author.name %>: <%= comment.text %></p>

        <% if can? :delete, comment %>
          <%= button_to "Delete Comment", user_post_comment_path(current_user, @post, comment), method: :delete  %>
        <% end %>
      </li>
    <% end %>
  </div>
</section>
